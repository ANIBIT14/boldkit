{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "dropzone",
  "type": "registry:ui",
  "description": "A drag-and-drop file upload zone with file validation and list display",
  "dependencies": [
    "class-variance-authority",
    "lucide-vue-next"
  ],
  "registryDependencies": [
    "utils",
    "progress",
    "spinner"
  ],
  "files": [
    {
      "path": "registry/default/ui/Dropzone.vue",
      "content": "<script setup lang=\"ts\">\nimport { ref, computed } from 'vue'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { cn } from '@/lib/utils'\nimport { Upload } from 'lucide-vue-next'\n\nexport interface FileRejection {\n  file: File\n  errors: Array<{ code: string; message: string }>\n}\n\nexport interface DropzoneState {\n  isDragging: boolean\n  isDisabled: boolean\n  acceptedFiles: File[]\n  rejectedFiles: FileRejection[]\n}\n\nconst dropzoneVariants = cva(\n  'relative flex flex-col items-center justify-center border-3 border-dashed border-foreground transition-all duration-200 cursor-pointer',\n  {\n    variants: {\n      state: {\n        idle: 'bg-background hover:bg-muted/30 shadow-[4px_4px_0px_hsl(var(--shadow-color))] hover:shadow-[6px_6px_0px_hsl(var(--shadow-color))] hover:translate-x-[-2px] hover:translate-y-[-2px]',\n        dragging: 'border-solid border-primary bg-primary/10 scale-[1.02] shadow-[8px_8px_0px_hsl(var(--primary))]',\n        disabled: 'opacity-50 cursor-not-allowed shadow-none',\n      },\n      variant: {\n        default: 'p-8',\n        compact: 'p-6',\n        minimal: 'p-3 border-2',\n      },\n    },\n    defaultVariants: {\n      state: 'idle',\n      variant: 'default',\n    },\n  }\n)\n\ntype DropzoneVariants = VariantProps<typeof dropzoneVariants>\n\ninterface DropzoneProps {\n  accept?: Record<string, string[]>\n  maxSize?: number\n  maxFiles?: number\n  disabled?: boolean\n  variant?: DropzoneVariants['variant']\n  class?: string\n}\n\nconst props = withDefaults(defineProps<DropzoneProps>(), {\n  maxSize: 10 * 1024 * 1024, // 10MB\n  maxFiles: 10,\n  disabled: false,\n  variant: 'default',\n})\n\nconst emit = defineEmits<{\n  filesAccepted: [files: File[]]\n  filesRejected: [files: FileRejection[]]\n}>()\n\nconst isDragging = ref(false)\nconst acceptedFiles = ref<File[]>([])\nconst rejectedFiles = ref<FileRejection[]>([])\nconst inputRef = ref<HTMLInputElement | null>(null)\n\nconst state = computed<DropzoneState>(() => ({\n  isDragging: isDragging.value,\n  isDisabled: props.disabled,\n  acceptedFiles: acceptedFiles.value,\n  rejectedFiles: rejectedFiles.value,\n}))\n\nconst stateVariant = computed(() => {\n  if (props.disabled) return 'disabled'\n  if (isDragging.value) return 'dragging'\n  return 'idle'\n})\n\nfunction formatBytes(bytes: number): string {\n  if (bytes === 0) return '0 Bytes'\n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\nfunction validateFile(file: File): FileRejection | null {\n  const errors: Array<{ code: string; message: string }> = []\n\n  if (file.size > props.maxSize) {\n    errors.push({\n      code: 'file-too-large',\n      message: `File is larger than ${formatBytes(props.maxSize)}`,\n    })\n  }\n\n  if (props.accept) {\n    const acceptedTypes = Object.entries(props.accept).flatMap(([mimeType, extensions]) => {\n      return [mimeType, ...extensions]\n    })\n\n    const fileType = file.type\n    const fileExtension = `.${file.name.split('.').pop()?.toLowerCase()}`\n\n    const isAccepted = acceptedTypes.some((type) => {\n      if (type.startsWith('.')) {\n        return fileExtension === type.toLowerCase()\n      }\n      if (type.endsWith('/*')) {\n        return fileType.startsWith(type.replace('/*', '/'))\n      }\n      return fileType === type\n    })\n\n    if (!isAccepted) {\n      errors.push({\n        code: 'file-invalid-type',\n        message: 'File type not accepted',\n      })\n    }\n  }\n\n  return errors.length > 0 ? { file, errors } : null\n}\n\nfunction processFiles(fileList: FileList | null) {\n  if (!fileList || props.disabled) return\n\n  const files = Array.from(fileList).slice(0, props.maxFiles)\n  const accepted: File[] = []\n  const rejected: FileRejection[] = []\n\n  files.forEach((file) => {\n    const rejection = validateFile(file)\n    if (rejection) {\n      rejected.push(rejection)\n    } else {\n      accepted.push(file)\n    }\n  })\n\n  acceptedFiles.value = [...acceptedFiles.value, ...accepted]\n  rejectedFiles.value = [...rejectedFiles.value, ...rejected]\n\n  if (accepted.length > 0) {\n    emit('filesAccepted', accepted)\n  }\n  if (rejected.length > 0) {\n    emit('filesRejected', rejected)\n  }\n}\n\nfunction handleDragEnter(e: DragEvent) {\n  e.preventDefault()\n  e.stopPropagation()\n  if (!props.disabled) {\n    isDragging.value = true\n  }\n}\n\nfunction handleDragLeave(e: DragEvent) {\n  e.preventDefault()\n  e.stopPropagation()\n  isDragging.value = false\n}\n\nfunction handleDragOver(e: DragEvent) {\n  e.preventDefault()\n  e.stopPropagation()\n}\n\nfunction handleDrop(e: DragEvent) {\n  e.preventDefault()\n  e.stopPropagation()\n  isDragging.value = false\n  processFiles(e.dataTransfer?.files ?? null)\n}\n\nfunction handleClick() {\n  if (!props.disabled) {\n    inputRef.value?.click()\n  }\n}\n\nfunction handleInputChange(e: Event) {\n  const target = e.target as HTMLInputElement\n  processFiles(target.files)\n  target.value = ''\n}\n\nconst acceptString = computed(() => {\n  if (!props.accept) return undefined\n  return Object.entries(props.accept)\n    .flatMap(([mimeType, extensions]) => [mimeType, ...extensions])\n    .join(',')\n})\n</script>\n\n<template>\n  <div\n    :class=\"cn(dropzoneVariants({ state: stateVariant, variant }), props.class)\"\n    role=\"button\"\n    :tabindex=\"disabled ? -1 : 0\"\n    :aria-disabled=\"disabled\"\n    @dragenter=\"handleDragEnter\"\n    @dragleave=\"handleDragLeave\"\n    @dragover=\"handleDragOver\"\n    @drop=\"handleDrop\"\n    @click=\"handleClick\"\n  >\n    <input\n      ref=\"inputRef\"\n      type=\"file\"\n      :accept=\"acceptString\"\n      :multiple=\"maxFiles > 1\"\n      :disabled=\"disabled\"\n      class=\"hidden\"\n      @change=\"handleInputChange\"\n    />\n\n    <slot :state=\"state\">\n      <!-- Default content -->\n      <div class=\"flex flex-col items-center gap-3 text-center\">\n        <div\n          :class=\"cn(\n            'flex items-center justify-center w-16 h-16 border-3 border-foreground bg-muted transition-all duration-200',\n            isDragging && 'bg-primary border-primary shadow-[4px_4px_0px_hsl(var(--foreground))] -translate-x-1 -translate-y-1'\n          )\"\n        >\n          <Upload\n            :class=\"cn(\n              'h-8 w-8 transition-all duration-200',\n              isDragging ? 'text-primary-foreground animate-bounce' : 'text-foreground'\n            )\"\n          />\n        </div>\n        <template v-if=\"variant !== 'minimal'\">\n          <p class=\"font-black uppercase tracking-wide text-lg\">\n            {{ isDragging ? 'Drop files here' : 'Drag & drop files' }}\n          </p>\n          <p class=\"text-sm text-muted-foreground font-bold\">\n            or click to browse\n          </p>\n        </template>\n      </div>\n    </slot>\n  </div>\n</template>\n",
      "type": "registry:ui",
      "target": "components/ui/Dropzone.vue"
    },
    {
      "path": "registry/default/ui/FileList.vue",
      "content": "<script setup lang=\"ts\">\nimport { computed } from 'vue'\nimport { cn } from '@/lib/utils'\nimport Progress from './Progress.vue'\nimport Spinner from './Spinner.vue'\nimport { X, File, Image, FileText, FileCode, FileAudio, FileVideo } from 'lucide-vue-next'\n\ninterface FileItem {\n  file: File\n  progress?: number\n  error?: string\n  uploading?: boolean\n}\n\ninterface FileListProps {\n  files: FileItem[]\n  class?: string\n}\n\nconst props = defineProps<FileListProps>()\n\nconst emit = defineEmits<{\n  remove: [file: File]\n}>()\n\nfunction formatBytes(bytes: number): string {\n  if (bytes === 0) return '0 Bytes'\n  const k = 1024\n  const sizes = ['Bytes', 'KB', 'MB', 'GB']\n  const i = Math.floor(Math.log(bytes) / Math.log(k))\n  return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i]\n}\n\nfunction getFileIcon(mimeType: string) {\n  if (mimeType.startsWith('image/')) return Image\n  if (mimeType.startsWith('video/')) return FileVideo\n  if (mimeType.startsWith('audio/')) return FileAudio\n  if (mimeType.includes('pdf') || mimeType.includes('document')) return FileText\n  if (mimeType.includes('code') || mimeType.includes('javascript') || mimeType.includes('json')) return FileCode\n  return File\n}\n\nfunction handleRemove(file: File) {\n  emit('remove', file)\n}\n</script>\n\n<template>\n  <div v-if=\"files.length > 0\" :class=\"cn('space-y-2 mt-4', props.class)\">\n    <div\n      v-for=\"(item, index) in files\"\n      :key=\"`${item.file.name}-${index}`\"\n      :class=\"cn(\n        'flex items-center gap-3 p-3 border-3 border-foreground bg-background shadow-[3px_3px_0px_hsl(var(--shadow-color))]',\n        item.error && 'border-destructive bg-destructive/10 shadow-[3px_3px_0px_hsl(var(--destructive))]'\n      )\"\n    >\n      <div class=\"flex items-center justify-center w-10 h-10 bg-muted border-3 border-foreground\">\n        <component :is=\"getFileIcon(item.file.type)\" class=\"h-5 w-5\" />\n      </div>\n\n      <div class=\"flex-1 min-w-0\">\n        <p class=\"font-bold text-sm truncate\">{{ item.file.name }}</p>\n        <p class=\"text-xs text-muted-foreground\">{{ formatBytes(item.file.size) }}</p>\n        <p v-if=\"item.error\" class=\"text-xs text-destructive font-bold\">{{ item.error }}</p>\n        <Progress\n          v-if=\"item.uploading && item.progress !== undefined\"\n          :model-value=\"item.progress\"\n          class=\"h-2 mt-1\"\n        />\n      </div>\n\n      <Spinner v-if=\"item.uploading\" size=\"sm\" />\n      <button\n        v-else\n        type=\"button\"\n        class=\"flex items-center justify-center w-8 h-8 border-3 border-foreground bg-background hover:bg-destructive hover:text-destructive-foreground hover:shadow-[2px_2px_0px_hsl(var(--foreground))] hover:-translate-x-0.5 hover:-translate-y-0.5 transition-all\"\n        @click.stop=\"handleRemove(item.file)\"\n      >\n        <X class=\"h-4 w-4\" />\n      </button>\n    </div>\n  </div>\n</template>\n",
      "type": "registry:ui",
      "target": "components/ui/FileList.vue"
    }
  ]
}
